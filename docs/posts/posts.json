[
  {
    "path": "posts/2022-05-04-post2/",
    "title": "Merkez Bankası Rezervleri Nasıl Hesaplanır?",
    "description": "Bir fonksiyon ile güncel rezerv değerine kolay erişim.",
    "author": [
      {
        "name": "A. Uraz Akgül",
        "url": {}
      }
    ],
    "date": "2022-05-04",
    "categories": [
      "Finans"
    ],
    "contents": "\r\nRezervlerin R’da nasıl hesaplanabileceğini göstermek için Mahfi\r\nEğilmez’in Rezerv\r\nMeselesi başlıklı bulabildiğim en güncel yazısından faydalandım. En\r\ngüncel diyorum çünkü diğer yazılarına göre farklılıklar gördüm ve en\r\ngüncelin en doğru olabileceğini düşündüm. Tabi ki hesaplama ile ilgili\r\ngörüş farklılıkları çıkacaktır ancak bu tartışma bu yazının konusu\r\ndeğildir.\r\nÜç ana konuyu öğretmeyi hedefliyorum: 1) TCMB’den veri nasıl çekilir?\r\n2) R’da bu hesaplamayı nasıl otomatik hale getirebiliriz? 3)\r\nRezervlerimiz nasıl hesaplanıyor?\r\nTCMB EVDS sistemine üye nasıl olunur ve sistemden API\r\nanahtarı nasıl alınır?\r\nTCMB’nin Elektronik Veri Dağıtım Sistemi olan EVDS’ye buradan ulaşabilirsiniz.\r\nDokümantasyon okumayı alışkanlık haline getirmeliyiz. Bunun için sayfada\r\nyer alan Kullanıcı\r\nDokümanları başlığına tıklayıp Web\r\nServis Kullanım Kılavuzu’na erişiyoruz.\r\nTCMB bu doküman ile web servis metotlarının parametrelerini\r\naçıklamış. Bu sayfa şimdilik kalsın.\r\nYine aynı sayfada yer alan Giriş Yap\r\nbölümüne giriyoruz. Daha önce kayıt olmadıysanız Kayıt Olun\r\nseçeneği ile kayıt işleminizi yapabilirsiniz. Ardından kullanıcı\r\nadı, parola ve doğrulama kodu ile giriş\r\nyapılabilir. Bundan sonra bir API anahtarına ihtiyacınız olacak. Bunun\r\niçin de isminiz ve soyisminizin yer aldığı yerden profilinize gidip\r\nAPI Anahtarı butonuna tıklayabilirsiniz. Tarayıcınızda çıkan\r\nbir mesaj ile API anahtarınız verilecek. Bunu kopyalayın ya da aşağıdaki\r\ngibi bir objeye kaydedin.\r\n\r\n\r\napi_key <- \"api_anahtariniz\"\r\n\r\n\r\n\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(jsonlite)\r\n\r\n\r\n\r\nBaşlamadan bir not: Önce detaylı bir şekilde açıklayacağım,\r\nsonrasında öğrendiklerimizi tek bir fonksiyonda toplayıp vereceğim.\r\nBaşlamadan diğer bir not: Önce yazıda hesaplanan değerlere ulaşıp bir\r\nnevi değerleri teyit edeceğiz; ardından güncel rezervi\r\nhesaplayacağız.\r\nRezervleri Hesaplamak İçin Denklemler:\r\nNet Rezervler = (Dış Varlıklar / O günkü TCMB USD Alış Kuru) - (Döviz\r\nYükümlülükleri / O günkü TCMB USD Alış Kuru)\r\nSwaplar = Döviz Swapları + Altın Swapları\r\nSwap Hariç Net Rezervler = Net Rezervler - Swaplar\r\nNet Rezervler\r\nNet Rezervler = (Dış Varlıklar / O günkü TCMB USD Alış Kuru) - (Döviz\r\nYükümlülükleri / O günkü TCMB USD Alış Kuru)\r\nEVDS’deki yeri: Tüm Seriler > TCMB Bilanço Verileri > Merkez\r\nBankası Analitik Bilanço (Bin TL)\r\nWeb Servis ile almak için aşağıdaki adımları takip edebiliriz.\r\nKategorileri görelim.\r\nDokümanda 4 no’lu EVDS Metaveri web servisleri başlığı\r\naltındaki 4.1 no’lu Konu Başlığı Servisi alt başlığında\r\nbulunmaktadır.\r\nTüm konu başlıklarını sunan bir servistir. Bu servisi temsilen\r\n“https://evds2.tcmb.gov.tr/service/evds/” tanımından\r\nsonra “categories” eklenmelidir.\r\nhttps://evds2.tcmb.gov.tr/service/evds/categories/key=XXXXXX&type=xml\r\nUzantısı xml olsa da biz bunu json ile alabiliriz (json için jsonlite\r\npaketinin fromJSON() fonksiyonundan faydalanacağız).\r\n\r\n\r\nurl_kategori <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/categories/key=\",\r\n                       api_key,\r\n                       \"&type=json\")\r\n\r\ndf_kategori <- fromJSON(url_kategori) %>%\r\n  as.data.frame() %>%\r\n  select(CATEGORY_ID,TOPIC_TITLE_TR)\r\n\r\nkategori_id <- df_kategori %>% \r\n  filter(TOPIC_TITLE_TR == 'TCMB BİLANÇO VERİLERİ') %>% \r\n  pull(CATEGORY_ID)\r\n\r\n\r\n\r\n2 sütun ve 24 satırdan oluşan df_kategori objesini aldık. TCMB\r\nBilanço Verileri’nin kategori ID’si 13’tür.\r\nVeri gruplarını görelim.\r\nDokümanda 4 no’lu EVDS Metaveri web servisleri başlığı\r\naltındaki 4.2 no’lu Veri Grubu Servisi alt başlığında\r\nbulunmaktadır.\r\nİlgili Konu başlığı bazında ya da tek bir veri grubunun metaveri\r\nbilgilerini listeleyen bir servistir. Bu servisi temsilen “https://evds2.tcmb.gov.tr/service/evds/” tanımından\r\nsonra “datagroups” eklenmelidir.\r\nhttps://evds2.tcmb.gov.tr/service/evds/datagroups/key=XXXX&mode=1&code=bie_yssk&type=json\r\nhttps://evds2.tcmb.gov.tr/service/evds/datagroups/key=XXXX&mode=2&code=2&type=xml\r\nVerilen örneklerde mode=1 ve mode=2 olarak verilse de biz mode=0\r\nolarak kullanacağız. Çünkü tüm konu başlıkları altındaki tüm veri\r\ngruplarını göreceğiz.\r\n\r\n\r\nurl_verigrubu <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/datagroups/key=\",\r\n                        api_key,\r\n                        \"&mode=0&type=json\")\r\n\r\ndf_verigrubu <- fromJSON(url_verigrubu) %>% \r\n  as.data.frame() %>% \r\n  filter(CATEGORY_ID == kategori_id) %>% \r\n  select(CATEGORY_ID,\r\n         DATAGROUP_CODE,\r\n         DATAGROUP_NAME,\r\n         FREQUENCY_STR,\r\n         NOTE,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nverigrubu_kodu <- df_verigrubu %>% \r\n  filter(DATAGROUP_NAME == 'Merkez Bankası Analitik Bilanço(Bin TL)') %>% \r\n  pull(DATAGROUP_CODE)\r\n\r\n\r\n\r\n7 sütun ve 6 satırdan oluşan df_verigrubu objesini aldık. Merkez\r\nBankası Analitik Bilanço(Bin TL)’nin veri grubu kodu\r\nbie_abanlbil’dir.\r\nSerileri görelim.\r\nDokümanda 4 no’lu EVDS Metaveri web servisleri başlığı\r\naltındaki 4.3 no’lu Seri Listesi Servisi alt başlığında\r\nbulunmaktadır.\r\nSeri listesini veri grubu ya da seri kodu bazında sunan bir\r\nservistir. Bu servisi temsilen “https://evds2.tcmb.gov.tr/service/evds/” tanımından\r\nsonra “serieList” eklenmelidir.\r\nhttps://evds2.tcmb.gov.tr/service/evds/serieList/key=XXXXX&type=xml&code=TP.DK.USD.A\r\nhttps://evds2.tcmb.gov.tr/service/evds/serieList/key=XXXXX&type=csv&code=bie_yssk\r\nBiz kodumuzu bildiğimiz için örnekte verilen code= kısmına kendi\r\nkodumuzu yazacağız.\r\n\r\n\r\nurl_seri <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/serieList/key=\",\r\n                   api_key,\r\n                   \"&type=json&code=\",\r\n                   verigrubu_kodu)\r\n\r\ndf_seri <- fromJSON(url_seri) %>% \r\n  as.data.frame() %>% \r\n  select(SERIE_CODE,\r\n         DATAGROUP_CODE,\r\n         SERIE_NAME,\r\n         FREQUENCY_STR,\r\n         DEFAULT_AGG_METHOD_STR,\r\n         DEFAULT_AGG_METHOD,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nseri <- df_seri %>% \r\n  filter(SERIE_NAME %in% c('A.1-DIŞ VARLIKLAR(Bin TL)',\r\n                           'P.1-TOPLAM DÖVİZ YÜKÜMLÜLÜKLERİ(Bin TL)')) %>% \r\n  pull(SERIE_CODE)\r\n\r\n\r\n\r\n8 sütun ve 31 satırdan oluşan df_seri objesini aldık. A.1-DIŞ\r\nVARLIKLAR(Bin TL)’nin seri kodu TP.AB.A02; P.1-TOPLAM DÖVİZ\r\nYÜKÜMLÜLÜKLERİ(Bin TL)’nin seri kodu TP.AB.A10’dur.\r\nSon olarak verileri alabiliriz. URL olarak temelde https://evds2.tcmb.gov.tr/service/evds/series=\r\nkullanacağız. Sonrası ise parametrelerin eklenmesi olacak. Dokümanda\r\nbununla ilgili açıklayıcı örnekler bulunmaktadır.\r\nAşağıdaki örnekte url’den sonra seri kodlarının arasına “-” koyduk.\r\nYani, birden fazla seriyi alabiliyoruz. Devamında ise başlangıç ve bitiş\r\ntarihlerine sırasıyla &startDate= ve &endDate= ile adres\r\ngösterdik. Bunlara ek olarak url’e frekans tipini ekleyeceğiz çünkü bu\r\nseri default iş günü olarak geliyor ve bunu haftalık yapmamız gerekir.\r\nEklenecek olan parametre frequency ve haftalık olduğu için 3\r\ndiyeceğiz.\r\n\r\n\r\nhaftalikTarih <- \"26-02-2021\"\r\nfrekans <- 3\r\n\r\nurl_veri <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                   seri[1],\r\n                   \"-\",\r\n                   seri[2],\r\n                   \"&startDate=\",\r\n                   haftalikTarih,\r\n                   \"&endDate=\",\r\n                   haftalikTarih,\r\n                   \"frequency=\",\r\n                   frekans,\r\n                   \"&type=json&key=\",\r\n                   api_key)\r\n\r\ndf_veri <- fromJSON(url_veri) %>% \r\n  as.data.frame() %>% \r\n  select(2,3,4) %>% \r\n  rename(\r\n    \"Tarih\"=1,\r\n    \"A.1-DIŞ VARLIKLAR(Bin TL)\"=2,\r\n    \"P.1-TOPLAM DÖVİZ YÜKÜMLÜLÜKLERİ(Bin TL)\"=3\r\n  )\r\n\r\n\r\n\r\nDış varlıklardan toplam döviz yükümlülüklerini çıkaracağız ancak\r\nçıkacak olan fark TL cinsinden olduğu için bunu dolara çevirmemiz\r\ngerekiyor. Bunu da o güne ait kur üzerinden yapacağız (yazıda hesaplama\r\nyapılırken 15:30’da belirlenen gösterge niteliğindeki Merkez Bankası\r\nkuru kullanılıyor; biz ise EVDS sisteminden aldığımız kuru\r\nkullanacağız).\r\n26 Şubat 2021’deki USD/TL kur değerine ulaşalım. Kurlar’ın bulunduğu\r\nkategorinin ID’si 2’dir. Bunun yanında Kurlar-Döviz Kurları’nın veri\r\ngrubu kodu bie_dkdovytl; (USD) ABD Doları (Döviz Alış)’ın seri kodu\r\nTP.DK.USD.A.YTL’dir.\r\n\r\n\r\nkategori_id_2 <- df_kategori %>% \r\n  filter(TOPIC_TITLE_TR == 'KURLAR') %>% \r\n  pull(CATEGORY_ID)\r\n\r\ndf_verigrubu_2 <- fromJSON(url_verigrubu) %>% \r\n  as.data.frame() %>% \r\n  filter(CATEGORY_ID == kategori_id_2) %>% \r\n  select(CATEGORY_ID,\r\n         DATAGROUP_CODE,\r\n         DATAGROUP_NAME,\r\n         FREQUENCY_STR,\r\n         NOTE,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nverigrubu_kodu_2 <- df_verigrubu_2 %>% \r\n  filter(DATAGROUP_NAME == 'Kurlar-Döviz Kurları') %>% \r\n  pull(DATAGROUP_CODE)\r\n\r\nurl_seri_2 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/serieList/key=\",\r\n                     api_key,\r\n                     \"&type=json&code=\",\r\n                     verigrubu_kodu_2)\r\n\r\ndf_seri_2 <- fromJSON(url_seri_2) %>% \r\n  as.data.frame() %>% \r\n  select(SERIE_CODE,\r\n         DATAGROUP_CODE,\r\n         SERIE_NAME,\r\n         FREQUENCY_STR,\r\n         DEFAULT_AGG_METHOD_STR,\r\n         DEFAULT_AGG_METHOD,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nseri_2 <- df_seri_2 %>% \r\n  filter(SERIE_NAME == '(USD) ABD Doları (Döviz Alış)') %>% \r\n  pull(SERIE_CODE)\r\n\r\nurl_veri_2 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                     seri_2,\r\n                     \"&startDate=\",\r\n                     haftalikTarih,\r\n                     \"&endDate=\",\r\n                     haftalikTarih,\r\n                     \"&type=json&key=\",\r\n                     api_key)\r\n\r\ndf_veri_2 <- fromJSON(url_veri_2) %>% \r\n  as.data.frame() %>% \r\n  select(2,3) %>% \r\n  rename(\r\n    \"Tarih\"=1,\r\n    \"(USD) ABD Doları (Döviz Alış)\"=2\r\n  )\r\n\r\n\r\n\r\nNet Rezerv aşağıdaki gibi hesaplanabilir.\r\n\r\n\r\n# Birimler Bin TL'dir.\r\n\r\ndis_varliklar <- as.numeric(df_veri$`A.1-DIŞ VARLIKLAR(Bin TL)`)\r\ndoviz_yukumluluk <- as.numeric(df_veri$`P.1-TOPLAM DÖVİZ YÜKÜMLÜLÜKLERİ(Bin TL)`)\r\nkur <- as.numeric(df_veri_2$`(USD) ABD Doları (Döviz Alış)`)\r\n\r\nnet_rezerv <- (dis_varliklar - doviz_yukumluluk) / kur\r\n\r\n\r\n\r\nNet Rezerv = -2247086 ya da -2,2 milyar dolar.\r\nSwaplar\r\n\r\n\r\n\r\nSwaplar = Döviz Swapları + Altın Swapları\r\nEVDS’deki yeri: Tüm Seriler > Ödemeler Dengesi, Uluslararası\r\nYatırım Pozisyonu > Uluslararası Rezervler ve Döviz Likiditesi\r\nTablosu (Milyon ABD Doları)\r\nWeb Servis ile almak için:\r\nÖDEMELER DENGESİ, ULUSLARARASI YATIRIM POZİSYONU’nun bulunduğu\r\nkategorinin ID’si 18’dir. Bunun yanında Uluslararası Rezervler ve Döviz\r\nLikiditesi Tablosu (Milyon ABD Doları)’nın veri grubu kodu\r\nbie_ulusdovlkd; II.2. Yurt içi para karşılığında döviz forward ve\r\nfuture’ların toplam kısa ve fazla pozisyon büyüklükleri (para\r\nswaplarının gelecekteki bacağını da kapsar.) (Milyon ABD Doları)’nın ve\r\nII.3. Diğer (Milyon ABD Doları)’nın seri kodları sırasıyla\r\nTP.DOVVARNC.K14 ve TP.DOVVARNC.K23’tür.\r\n\r\n\r\nkategori_id_3 <- df_kategori %>% \r\n  filter(TOPIC_TITLE_TR == 'ÖDEMELER DENGESİ, ULUSLARARASI YATIRIM POZİSYONU') %>% \r\n  pull(CATEGORY_ID)\r\n\r\ndf_verigrubu_3 <- fromJSON(url_verigrubu) %>% \r\n  as.data.frame() %>% \r\n  filter(CATEGORY_ID == kategori_id_3) %>% \r\n  select(CATEGORY_ID,\r\n         DATAGROUP_CODE,\r\n         DATAGROUP_NAME,\r\n         FREQUENCY_STR,\r\n         NOTE,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nverigrubu_kodu_3 <- df_verigrubu_3 %>% \r\n  filter(DATAGROUP_NAME == 'Uluslararası Rezervler ve Döviz Likiditesi Tablosu (Milyon ABD Doları)') %>% \r\n  pull(DATAGROUP_CODE)\r\n\r\nurl_seri_3 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/serieList/key=\",\r\n                     api_key,\r\n                     \"&type=json&code=\",\r\n                     verigrubu_kodu_3)\r\n\r\ndf_seri_3 <- fromJSON(url_seri_3) %>% \r\n  as.data.frame() %>% \r\n  select(SERIE_CODE,\r\n         DATAGROUP_CODE,\r\n         SERIE_NAME,\r\n         FREQUENCY_STR,\r\n         DEFAULT_AGG_METHOD_STR,\r\n         DEFAULT_AGG_METHOD,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nuzun_vektor <- paste0(\r\n  \"II.2. Yurt içi para karşılığında döviz forward ve future'ların \",\r\n  \"toplam kısa ve fazla pozisyon büyüklükleri \",\r\n  \"(para swaplarının gelecekteki bacağını da kapsar.) (Milyon ABD Doları)\"\r\n)\r\n\r\nseri_3 <- df_seri_3 %>% \r\n  filter(SERIE_NAME %in% c(uzun_vektor,\r\n                           'II.3. Diğer (Milyon ABD Doları)')) %>% \r\n  pull(SERIE_CODE)\r\n\r\naylikTarih <- \"01-02-2021\"\r\nfrekans_2 <- 5\r\n\r\nurl_veri_3 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                     seri_3[1],\r\n                     \"-\",\r\n                     seri_3[2],\r\n                     \"&startDate=\",\r\n                     aylikTarih,\r\n                     \"&endDate=\",\r\n                     aylikTarih,\r\n                     \"&frequency=\",\r\n                     frekans_2,\r\n                     \"&type=json&key=\",\r\n                     api_key)\r\n\r\ndf_veri_3 <- fromJSON(url_veri_3) %>% \r\n  as.data.frame() %>% \r\n  select(2,3,4) %>% \r\n  rename(\r\n    \"Tarih\"=1,\r\n    \"II.2. Yurt içi para karşılığında...\"=2,\r\n    \"II.3. Diğer (Milyon ABD Doları)\"=3\r\n  )\r\n\r\n\r\n\r\nYukarıda veriyi aylık olarak çekeceğimiz için frekansı 5 ve tarihi\r\nbaşında 1 olacak şekilde yazdık.\r\nSwap tutarını aşağıdaki gibi hesaplayabiliriz.\r\n\r\n\r\n# Birimler Milyon ABD Dolarıdır.\r\n\r\ndoviz_swap <- as.numeric(df_veri_3$`II.2. Yurt içi para karşılığında...`)\r\naltin_swap <- as.numeric(df_veri_3$`II.3. Diğer (Milyon ABD Doları)`)\r\n\r\nswap <- doviz_swap + altin_swap\r\n\r\n\r\n\r\nSwap tutarı = -58024 ya da -58,1 milyar dolar.\r\nSwap Hariç Net Rezervler\r\nSwap Hariç Net Rezervler = Net Rezervler - Swaplar\r\n\r\n\r\nrezerv <- net_rezerv + swap*1000 #birim farklılığı giderildi.\r\n\r\n\r\n\r\nNet rezervler (-) olduğu ve swaplar ile yükümlülüğümüz arttığı için\r\niki değeri topluyoruz.\r\nSwap hariç net rezervler -60271086 ya da -60,3 milyar dolardır.\r\nSon olarak, yazdıklarımızı bir fonksiyonda toplayalım ve güncel\r\nrezerv miktarımızı hesaplayalım.\r\n\r\n\r\nrezerv_hesapla <- function(api_key = NULL, haftalikTarih = NULL, aylikTarih = NULL){\r\n  \r\n  # Net Rezerv\r\n  \r\n  url_veri <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                     \"TP.AB.A02-TP.AB.A10\",\r\n                     \"&startDate=\",\r\n                     haftalikTarih,\r\n                     \"&endDate=\",\r\n                     haftalikTarih,\r\n                     \"frequency=3\",\r\n                     \"&type=json&key=\",\r\n                     api_key)\r\n  \r\n  df_veri <- fromJSON(url_veri) %>% \r\n    as.data.frame() %>% \r\n    select(2,3,4) %>% \r\n    rename(\r\n      \"Tarih\"=1,\r\n      \"A.1-DIŞ VARLIKLAR(Bin TL)\"=2,\r\n      \"P.1-TOPLAM DÖVİZ YÜKÜMLÜLÜKLERİ(Bin TL)\"=3\r\n    )\r\n  \r\n  url_veri_2 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                       \"TP.DK.USD.A.YTL\",\r\n                       \"&startDate=\",\r\n                       haftalikTarih,\r\n                       \"&endDate=\",\r\n                       haftalikTarih,\r\n                       \"&type=json&key=\",\r\n                       api_key)\r\n  \r\n  df_veri_2 <- fromJSON(url_veri_2) %>% \r\n    as.data.frame() %>% \r\n    select(2,3) %>% \r\n    rename(\r\n      \"Tarih\"=1,\r\n      \"(USD) ABD Doları (Döviz Alış)\"=2\r\n    )\r\n  \r\n  dis_varliklar <- as.numeric(df_veri$`A.1-DIŞ VARLIKLAR(Bin TL)`)\r\n  doviz_yukumluluk <- as.numeric(df_veri$`P.1-TOPLAM DÖVİZ YÜKÜMLÜLÜKLERİ(Bin TL)`)\r\n  kur <- as.numeric(df_veri_2$`(USD) ABD Doları (Döviz Alış)`)\r\n  \r\n  net_rezerv <- (dis_varliklar - doviz_yukumluluk) / kur\r\n  \r\n  # Swap\r\n  \r\n  url_veri_3 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                       \"TP.DOVVARNC.K14-TP.DOVVARNC.K23\",\r\n                       \"&startDate=\",\r\n                       aylikTarih,\r\n                       \"&endDate=\",\r\n                       aylikTarih,\r\n                       \"&frequency=5\",\r\n                       \"&type=json&key=\",\r\n                       api_key)\r\n  \r\n  df_veri_3 <- fromJSON(url_veri_3) %>% \r\n    as.data.frame() %>% \r\n    select(2,3,4) %>% \r\n    rename(\r\n      \"Tarih\"=1,\r\n      \"II.2. Yurt içi para karşılığında...\"=2,\r\n      \"II.3. Diğer (Milyon ABD Doları)\"=3\r\n    )\r\n  \r\n  doviz_swap <- as.numeric(df_veri_3$`II.2. Yurt içi para karşılığında...`)\r\n  altin_swap <- as.numeric(df_veri_3$`II.3. Diğer (Milyon ABD Doları)`)\r\n  \r\n  swap <- doviz_swap + altin_swap\r\n  \r\n  # Swap Hariç Net Rezerv\r\n  \r\n  rezerv <- net_rezerv + swap*1000\r\n  \r\n  return(rezerv)\r\n  \r\n}\r\n\r\nrezerv_hesapla(api_key = \"api_anahtariniz\",\r\n               haftalikTarih = \"28-04-2022\",\r\n               aylikTarih = \"01-03-2022\")\r\n\r\n\r\n\r\nFonksiyonun sonucu her ne kadar önceki örnek ile bir çıksa da yine de\r\ngünceli kontrol edelim.\r\nElimizdeki son haftalık veriler 28 Nisan 2022’ye; çekebildiğimiz swap\r\nverileri ise Mart 2022’ye ait.\r\nNet Rezervler = (1639818009 / 14.7962) - (1548217098 / 14.7962) =\r\n(1639818009 - 1548217098) / 14.7962 = 6190840 ya da 6,2 milyar dolar\r\nSwaplar = (-58373) + (-3768) = -62141 ya da -62,1 milyar dolar\r\nSwap Hariç Net Rezervler = 6,2 + (-62,1) = -55,9 milyar dolar\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-05-04-post2/img1.PNG",
    "last_modified": "2022-05-04T13:51:43+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-02-post1/",
    "title": "Event Study (Olay Çalışması): FED ve Gezi'nin Kısa Vadede Kura Etkisi",
    "description": "#GeziyiSavunacağız",
    "author": [
      {
        "name": "A. Uraz Akgül",
        "url": {}
      }
    ],
    "date": "2022-05-02",
    "categories": [
      "Finans"
    ],
    "contents": "\r\n\r\n\r\n\r\n\r\n\r\n\r\nGezi’nin 9. yıldönümü yaklaşırken ‘kurun Gezi nedeniyle arttığı’\r\nsözleri duyulmaya başlandı ki bu da devam edecektir. Ben de blogumun ilk\r\nyazısında bu konuya bilimsel bir bakış açısı katmak\r\nistedim.\r\nNormal şartlarda bu konuyu incelemek kolay olabilirdi ancak Gezi’nin\r\nbaşladığı 28 Mayıs gününden önce 22 Mayıs’ta FED’in açıklamaları\r\ngelişmekte olan ülke piyasaları için kritikti. Dönemin FED Başkanı Ben\r\nBernanke Merkez Bankası’nın tahvil alımlarını azaltabileceğini\r\nsöylemişti. Bu da parasal genişlemeden (Quantitative Easing, QE) çıkışın\r\nilk adımıydı.\r\nGezi’nin FED’in açıklamasına yakın bir tarihte başlaması işleri biraz\r\nzorlaştırıyor. Bu tip durumlarda Türkiye ile benzer ülkeleri de\r\nçalışmaya katmak faydalı olabilir. Bunu göz önüne alarak iki grup ülkeyi\r\nçalışmaya dahil ettim: Kırılgan Beşli (Fragile Five) ve Zordaki Onlu\r\n(Troubled Ten).\r\nKırılgan Beşli ülkeleri (Morgan Stanley, 2013): Brezilya, Endonezya,\r\nGüney Afrika, Hindistan ve Türkiye.\r\nZordaki Onlu ülkeleri (Morgan Stanley, 2015): Brezilya, Güney Afrika,\r\nGüney Kore, Kolombiya, Peru, Rusya, Singapur, Şili, Tayland ve\r\nTayvan.\r\nİki grubu birleştirirsek çalışmaya toplamda 13 ülkeyi dahil etmiş\r\nolacağız.\r\nTartışmalar dolar üzerinden ilerlediği için Türkiye de dahil 13\r\nülkenin para birimlerinin dolar karşısındaki değeri baz alındı. Değerler\r\nReuters’tan alınmıştır. Verilere Github hesabımdan\r\nulaşabilirsiniz.\r\n\r\n\r\nÜlke\r\n\r\n\r\nDöviz Kodu\r\n\r\n\r\nBrezilya\r\n\r\n\r\nUSDBRL\r\n\r\n\r\nEndonezya\r\n\r\n\r\nUSDIDR\r\n\r\n\r\nGüney Afrika\r\n\r\n\r\nUSDZAR\r\n\r\n\r\nGüney Kore\r\n\r\n\r\nUSDKRW\r\n\r\n\r\nHindistan\r\n\r\n\r\nUSDINR\r\n\r\n\r\nKolombiya\r\n\r\n\r\nUSDCOP\r\n\r\n\r\nPeru\r\n\r\n\r\nUSDPEN\r\n\r\n\r\nRusya\r\n\r\n\r\nUSDRUB\r\n\r\n\r\nSingapur\r\n\r\n\r\nUSDSGD\r\n\r\n\r\nŞili\r\n\r\n\r\nUSDCLP\r\n\r\n\r\nTayland\r\n\r\n\r\nUSDTHB\r\n\r\n\r\nTayvan\r\n\r\n\r\nUSDTWD\r\n\r\n\r\nTürkiye\r\n\r\n\r\nUSDTRY\r\n\r\n\r\nÖncelikle ülkelerin performanslarına bakalım. 2013 yılının başından\r\nsonuna kadar bir aralık belirledim ve her bir ülke kurunu 100 ile\r\nbaşlatarak bir endeks oluşturdum. Tüm kurların yer aldığı görsel\r\naşağıdaki gibidir.\r\n\r\n\r\n\r\nYukarıdaki grafiğe bir de ayrı ayrı bakalım.\r\n\r\n\r\n\r\n22 Mayıs 2013 tarihi baz alındığında genel resimde bir\r\nhareketlenmenin yaşandığını söyleyebiliriz ancak tam olarak yeterli ve\r\ngüvenilir bir yorum olmayacaktır. Bu noktada son bir görsel ile olay\r\nçalışmasına geçebiliriz. Aşağıdaki görselde 13 ülkenin endeks\r\nortalamasının USDTRY ile olan ilişkisi zaman serisi olarak\r\nverilmiştir.\r\n\r\n\r\n\r\nYukarıdaki görsel, yoruma diğerlerine göre biraz daha kolaylık\r\nkatıyor. Hareketlenmenin 22 Mayıs 2013 öncesinde başladığını ve diğer\r\nEM’ler ile korele bir şekilde hareket ettiğimizi görebiliriz. Kur ile\r\nendeks arasındaki farkı (USDTRY - Endeks > 0, pozitif bölge) ise\r\naşağıdaki gibi verebiliriz.\r\n\r\n\r\n\r\nYazının bundan sonraki kısmında Event Study’e geçebiliriz.\r\nOlay çalışması da diyebileceğimiz Event Study için kısaca herhangi\r\nbir olayın finansal piyasalar üzerine etkisini tespit etmek için\r\nkullanılan istatistiksel bir yöntemdir tanımını yapabiliriz. Literatüre\r\nbakıldığında yapılan çalışmaların hisse/borsa ağırlıklı olduğunu\r\ngörebiliriz. Ancak bu çalışmada yazının başında da belirttiğim nedenden\r\ndolayı ülke kurları üzerinden gitmeyi tercih ettim.\r\nOlay çalışmasını üç parçada inceliyoruz.\r\nEvent Studies in Economics and Finance,\r\nA. Craig MacKinlayEstimation Window denilen Tahmin Penceresi.\r\nTahmin penceresinde ortada henüz bir olay yoktur. Bu adımda USDTRY\r\ngetirilerinin piyasa (13 ülke kurundan hesaplanan endeks) getirisine\r\nkıyasla gerçekleşen normal davranışı belirlenir. Tahmin penceresinde\r\npiyasaya göre düzeltilmiş getiri (market adjusted return) yöntemini\r\nkullanacağız. Aslında bu nedenle tahmin penceresi bölümüne ihtiyacımız\r\nolmayacak (diğer bazı yöntemlerde olabiliyor).\r\n\\(AR_{it} = R_{it} - R_{mt}\\)\r\n\\(AR_{it}:\\) t gününe ait anormal\r\ngetiri (AR: Abnormal Return)\r\n\\(R_{it}:\\) t gününe ait USDTRY\r\ngetirisi\r\n\\(R_{mt}:\\) t gününe ait endeks\r\ngetirisi\r\nTahmin penceresi için bir başlangıç ve bir bitiş tarihi vardır.\r\nEvent Window denilen Olay Penceresi.\r\nOlay penceresi olaydan sonraki aralığı ifade ediyor. İlgili olayın\r\nolduktan sonra kaç gün daha USDTRY üzerinde etkisinin olduğu\r\ngösterilir.\r\nOlay penceresinde tıpkı tahmin penceresinde olduğu gibi bir başlangıç\r\nve bir de bitiş tarihi olmak ile beraber bir de olay günü vardır.\r\nPostevent Window denilen Olay Sonrası Pencere.\r\nOlay sonrası pencerede ise USDTRY’nin uzun vadeli performansı\r\ngösterilir.\r\nOlay sonrası pencerede de diğer iki pencerede olduğu gibi bir\r\nbaşlangıç ve bir de bitiş tarihi vardır.\r\nOlay çalışması ile FED ve Gezi’nin herhangi bir anormal getiriye yol\r\naçıp açmadığı inceleyeceğiz.\r\nAdım adım neler yapacağız?\r\nUSDTRY ve EM endeksinin getirilerini hesaplayarak başlıyoruz. Bunun\r\niçin logaritmik getiriyi kullanacağız.\r\n\r\n\r\n\r\n\r\n\r\n\r\nUSDTRY getirilerinden hesaplanan EM endeks getirilerini çıkarıyoruz\r\nve anormal getirileri (abnormal return) elde ediyoruz.\r\n\r\n\r\n\r\nBir önceki adımda hesaplanan anormal getirilerden kümülatif anormal\r\ngetirileri (cumulative abnormal return) hesaplıyoruz. Anormal getiri\r\ndeğerlerini günlük olarak hesapladık ve bu da piyasanın tepkisini tek\r\nbir gün için ölçer. Uzun dönemdeki olay etkisine bakabilmek için olay\r\npenceresi süresindeki anormal getiriler toplanarak kümülatif anormal\r\ngetiri değerleri hesaplanır. Bu da piyasanın olay penceresi dönemindeki\r\ngenel fiyat eğilimini gösterir.\r\n\r\n\r\n\r\nÇalışmada, FED için olay penceresi, -5 gün olay öncesi, +5 gün\r\nolay sonrası ve olay günü olmak üzere 11 gün olarak; Gezi için (Gezi’nin\r\n31 Mayıs’ta aktif olduğunu göz önüne alırsak) olay penceresi, -5 gün\r\nolay öncesi, +5 gün olay sonrası ve olay günü olmak üzere 11 gün olarak\r\nbelirlenmiştir.\r\nHesapladığımız kümülatif anormal getiri değerleri istatistiksel\r\nolarak sıfırdan farklı ise ilgili olayın değişkenler üzerinde etkili\r\nolduğunu ve anormal değişimi ortaya çıkardığını söyleyeceğiz. Ancak,\r\nelde edilen kümülatif anormal getiri 0’a eşit ya da 0’a çok yakın\r\ndeğerler alıyorsa ilgili olayın değişkenler üzerinde etkili olmadığı\r\nifade edebileceğiz.\r\nTeste karar vermek için öncelikle getirilerin normal dağılıp\r\ndağılmadığını inceleyeceğiz. Normallik varsayımının kontrolü için\r\nShapiro-Wilk normallik testi kullanılmıştır. Çünkü örnek büyüklüğünün\r\n50’den küçük olması durumunda Shapiro-Wilk; büyük olması durumunda ise\r\nKolmogorov Smirnov kullanılır gibi bir kullanım algoritması vardır.\r\nOlay penceresi FED(-5,+5) için;\r\n\\(H_0:\\) Olay penceresi içerisinde,\r\nolay gününden 5 gün öncesi ve 5 gün sonrası kümülatif aşırı getiriler\r\nnormal dağılım göstermektedir.\r\n\\(H_1:\\) Olay penceresi içerisinde,\r\nolay gününden 5 gün öncesi ve 5 gün sonrası kümülatif aşırı getiriler\r\nnormal dağılım göstermemektedir.\r\n\r\n\r\n    Shapiro-Wilk normality test\r\n\r\ndata:  obs_fed\r\nW = 0.89606, p-value = 0.1654\r\n\r\nOlay penceresi Gezi(-5,+5) için;\r\n\\(H_0:\\) Olay penceresi içerisinde,\r\nolay gününden 5 gün öncesi ve 5 gün sonrası kümülatif aşırı getiriler\r\nnormal dağılım göstermektedir.\r\n\\(H_1:\\) Olay penceresi içerisinde,\r\nolay gününden 5 gün öncesi ve 5 gün sonrası kümülatif aşırı getiriler\r\nnormal dağılım göstermemektedir.\r\n\r\n\r\n    Shapiro-Wilk normality test\r\n\r\ndata:  obs_gezi\r\nW = 0.85286, p-value = 0.0465\r\n\r\nShapiro-Wilk testine göre p değerleri sırasıyla 0.1653741 ve 0.046503\r\n%5’ten büyük çıktığı için (ikincisi yaklaşık %5) normallik varsayımının\r\nsağlandığını söyleyebiliriz. Bu durumda parametrik olmayan testler\r\ngrubundaki bağımlı örneklem t testi (Paired Samples T-test) ile bir\r\ngrubun belirli bir olaydan önceki ve sonraki ortalamaları arasındaki\r\nfarkın anlamlılığı test edilebilir.\r\nOlay penceresi FED(-5,+5) için;\r\n\\(H_{0,(\\pm5)}: CAR_{-5} =\r\nCAR_{+5}\\)\r\nOlay günü tarihinden önceki 5 günlük kümülatif ortalama anormal\r\ngetirileriyle olay gününden sonraki 5 günlük kümülatif anormal\r\ngetirileri arasında fark yoktur.\r\n\\(H_{1,(\\pm5)}: CAR_{-5} \\neq\r\nCAR_{+5}\\)\r\nOlay günü tarihinden önceki 5 günlük kümülatif ortalama anormal\r\ngetirileriyle olay gününden sonraki 5 günlük kümülatif anormal\r\ngetirileri arasında fark vardır.\r\n\r\n\r\n    Paired t-test\r\n\r\ndata:  before_fed and after_fed\r\nt = 1.5718, df = 4, p-value = 0.1911\r\nalternative hypothesis: true difference in means is not equal to 0\r\n95 percent confidence interval:\r\n -0.002125328  0.007671368\r\nsample estimates:\r\nmean of the differences \r\n             0.00277302 \r\n\r\nOlay penceresi Gezi(-5,+5) için;\r\n\\(H_{0,(\\pm5)}: CAR_{-5} =\r\nCAR_{+5}\\)\r\nOlay günü tarihinden önceki 5 günlük kümülatif ortalama anormal\r\ngetirileriyle olay gününden sonraki 5 günlük kümülatif anormal\r\ngetirileri arasında fark yoktur.\r\n\\(H_{1,(\\pm5)}: CAR_{-5} \\neq\r\nCAR_{+5}\\)\r\nOlay günü tarihinden önceki 5 günlük kümülatif ortalama anormal\r\ngetirileriyle olay gününden sonraki 5 günlük kümülatif anormal\r\ngetirileri arasında fark vardır.\r\n\r\n\r\n    Paired t-test\r\n\r\ndata:  before_gezi and after_gezi\r\nt = -2.2407, df = 4, p-value = 0.08855\r\nalternative hypothesis: true difference in means is not equal to 0\r\n95 percent confidence interval:\r\n -0.012374046  0.001321203\r\nsample estimates:\r\nmean of the differences \r\n           -0.005526422 \r\n\r\np değerleri olay penceresi FED(-5,+5) için 0.1911003 ve Gezi(-5,+5)\r\niçin 0.0885484 %5’ten büyük olduğu için sıfır hipotezi reddedilemez; bu\r\nda olay öncesi ile sonrası ortalama getirilerinde fark olmadığını\r\ngösterir.\r\nOrtalama getiriler FED(-5,+5) için olay öncesi 0.0039657 iken; olay\r\nsonrası 0.0011927; Gezi(-5,+5) için olay öncesi -0.0013321 iken; olay\r\nsonrası 0.0041943 olmuştur.\r\nBir de kümülatif anormal getirilerin istatistiksel olarak anlamlı\r\nolup olmadıklarına bireysel olarak bakalım. Bu durumda t istatistiği\r\n\\(\\frac{CAR}{\\sigma(CAR)*\\sqrt{Gün\\\r\nSayısı}}\\) olacak.\r\nUSING DAILY STOCK RETURNS The Case of\r\nEvent Studies*, S.J.Brown, J.B.Warner\r\n\r\n\r\n\r\n\r\n\r\nFED için olay öncesinde 3 kümülatif anormal getiri istatistiksel\r\nolarak anlamlı çıkarken; Gezi için olay sonrasında 2 kümülatif anormal\r\ngetiri istatistiksel olarak anlamlı çıkmıştır.\r\nOlay penceresi için FED(-5,+5) ve Gezi(-5,+5) demiştik. Bunların\r\nistatistiksel anlamlılığına bakalım.\r\n\r\n\r\n\r\nOlay penceresinde FED(,-5,+5) ve Gezi(-5,+5) için |-0.0389315| >\r\n1.96 ve |-0.1593087| > 1.96 olmadığı için istatistiksel olarak\r\nanlamlı çıkmamıştır.\r\nSonuç olarak şunları söyleyebilirim: Bu çalışma, FED ve Gezi’nin kısa\r\nvadeli etkilerini göstermektedir. Kısa vadede her iki olayda da\r\nistatistiksel olarak anlamlı bir etki olmasa da Türkiye’nin diğer EM’ler\r\nile 22 Mayıs 2013’ten önce başlayarak korele bir şekilde hareket ettiği\r\ndikkate alınmalıdır. Belirlenen olay günlerinin farklı olay\r\npencerelerinde de değerlendirilmesini tavsiye ederim. Ayrıca tercih\r\nettiğim market adjusted returns dışında farklı yöntemlerin de\r\nkullanıldığını hatırlatmak isterim. Daha uzun vadedeki etkilere bakmak\r\niçin farklı istatistiksel yöntemlerin uygulanması yazının başında\r\nbelirtilen tartışmaya farklı bir açı katacaktır.\r\nÇalışmanın R kodlarına aşağıdan ulaşılabilir.\r\n\r\n\r\noptions(scipen = 999)\r\nlibrary(tidyverse)\r\n\r\ndf <- readxl::read_excel(\"data.xlsx\")\r\n\r\nmaster <- df %>% \r\n  mutate(Date = as.Date(Date)) %>% \r\n  filter(Date >= as.Date(\"2013-01-01\") & Date <= as.Date(\"2013-12-31\"))\r\n\r\nemergingMarket <- master %>% \r\n  pivot_longer(!Date, names_to = \"Currencies\", values_to = \"Values\") %>% \r\n  arrange(Currencies)\r\n\r\ninitialValues <- emergingMarket %>% \r\n  group_by(Currencies) %>% \r\n  slice_min(Date) %>% \r\n  rename(\"Initial\"=3)\r\n\r\nemergingMarketFinal <- emergingMarket %>% \r\n  left_join(initialValues, by = c(\"Date\",\"Currencies\")) %>% \r\n  mutate(Initial = zoo::na.locf(Initial)) %>% \r\n  mutate(\"SubIndex\" = Values / Initial * 100) %>% \r\n  mutate(\"ColGr\" = ifelse(Currencies == \"USDTRY\", \"USDTRY\", \"Diğer EM'ler\"))\r\n\r\nggplot(emergingMarketFinal,\r\n       aes(x = Date, y = SubIndex, group = Currencies, color = ColGr)) +\r\n  geom_line() +\r\n  geom_hline(yintercept = 100) +\r\n  geom_vline(xintercept = as.Date(\"2013-05-22\"), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(legend.title = element_blank(),\r\n        legend.position = \"bottom\",\r\n        axis.title = element_blank(),\r\n        plot.caption = element_text(face = \"italic\")) +\r\n  scale_color_manual(values = c(\"gray80\",\"red\")) +\r\n  labs(caption = \"EM: Emerging Market\")\r\n\r\nggplot(emergingMarketFinal,\r\n       aes(x = Date, y = SubIndex, group = Currencies, color = ColGr)) +\r\n  geom_line() +\r\n  geom_hline(yintercept = 100) +\r\n  geom_vline(xintercept = as.Date(\"2013-05-22\"), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(legend.title = element_blank(),\r\n        legend.position = \"none\",\r\n        axis.title = element_blank(),\r\n        strip.text = element_text(size = 20)) +\r\n  scale_color_manual(values = c(\"gray30\",\"red\")) +\r\n  scale_x_date(date_labels = \"%m-%Y\") +\r\n  facet_wrap(~Currencies, ncol = 3)\r\n\r\nemIndex <- emergingMarketFinal %>% \r\n  select(Date,Currencies,SubIndex) %>% \r\n  pivot_wider(names_from = \"Currencies\", values_from = \"SubIndex\") %>% \r\n  mutate(\"EMIndex\" = rowMeans(.[,-1], na.rm = TRUE))\r\n\r\nemIndex %>% \r\n  select(Date,USDTRY,EMIndex) %>% \r\n  pivot_longer(!Date, names_to = \"Currencies\", values_to = \"Index\") %>% \r\n  ggplot(aes(x = Date, y = Index, group = Currencies, color = Currencies)) +\r\n  geom_line() +\r\n  geom_hline(yintercept = 100) +\r\n  geom_vline(xintercept = as.Date(\"2013-05-22\"), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.title = element_blank(),\r\n        legend.position = \"bottom\",\r\n        plot.caption = element_text(face = \"italic\")) +\r\n  scale_color_manual(values = c(\"gray30\",\"red\")) +\r\n  labs(caption = \"EMIndex: 13 Emerging Market'ın Ortalaması\")\r\n\r\nemIndex %>% \r\n  select(Date,USDTRY,EMIndex) %>% \r\n  mutate(Diff = USDTRY - EMIndex) %>% \r\n  ggplot(aes(x = Date, y = Diff)) +\r\n  geom_area(fill = \"gray40\") +\r\n  geom_vline(xintercept = as.Date(\"2013-05-22\"), linetype = \"dashed\") +\r\n  geom_hline(yintercept = 0) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank())\r\n\r\ndf_event <- emIndex %>% \r\n  select(Date,USDTRY,EMIndex) %>% \r\n  mutate(\r\n    \"USDTRY Return\" = lag(log(lead(USDTRY)/USDTRY)),\r\n    \"EMIndex Return\" = lag(log(lead(EMIndex)/EMIndex))\r\n  ) %>% \r\n  na.omit()\r\n\r\ndf_event %>% \r\n  select(Date,`USDTRY Return`,`EMIndex Return`) %>% \r\n  pivot_longer(!Date, names_to = \"Vars\", values_to = \"Return\") %>% \r\n  ggplot(aes(x = Date, y = Return, group = Vars, color = Vars)) +\r\n  geom_line() +\r\n  geom_vline(xintercept = as.Date(\"2013-05-22\"), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.position = \"none\") +\r\n  facet_wrap(~Vars, ncol = 1) +\r\n  scale_color_manual(values = c(\"blue\",\"red\"))\r\n\r\ndf_event <- df_event %>% \r\n  mutate(\"Abnormal Return\" = `USDTRY Return` - `EMIndex Return`)\r\n\r\n# -5,5 (FED için)\r\n\r\ndf_event_fed <- df_event %>% \r\n  filter(Date >= as.Date(\"2013-05-15\") & Date <= as.Date(\"2013-05-29\")) %>% \r\n  mutate(\"Cumulative Abnormal Return\" = cumsum(`Abnormal Return`))\r\n\r\n# -5,5 (Gezi için)\r\n\r\ndf_event_gezi <- df_event %>% \r\n  filter(Date >= as.Date(\"2013-05-24\") & Date <= as.Date(\"2013-06-07\")) %>% \r\n  mutate(\"Cumulative Abnormal Return\" = cumsum(`Abnormal Return`))\r\n\r\nobs_fed <- df_event_fed %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nshapiro.test(obs_fed)\r\nshapiro.test(obs_fed)$p.value\r\n\r\nobs_gezi <- df_event_gezi %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nshapiro.test(obs_gezi)\r\nshapiro.test(obs_gezi)$p.value\r\n\r\nbefore_fed <- df_event_fed %>% \r\n  filter(Date < as.Date(\"2013-05-22\")) %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nafter_fed <- df_event_fed %>% \r\n  filter(Date > as.Date(\"2013-05-22\")) %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nt.test(before_fed, after_fed, paired = TRUE)\r\nt.test(before_fed, after_fed, paired = TRUE)$p.value\r\n\r\nbefore_gezi <- df_event_gezi %>% \r\n  filter(Date < as.Date(\"2013-05-31\")) %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nafter_gezi <- df_event_gezi %>% \r\n  filter(Date > as.Date(\"2013-05-31\")) %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nt.test(before_gezi, after_gezi, paired = TRUE)\r\nt.test(before_gezi, after_gezi, paired = TRUE)$p.value\r\n\r\nmean(before_fed)\r\nmean(after_fed)\r\n\r\nmean(before_gezi)\r\nmean(after_gezi)\r\n\r\nsigma_fed <- df_event_fed %>% \r\n  summarise(sd = sd(`Abnormal Return`)) %>% \r\n  pull(sd)\r\n\r\ndf_event_fed <- df_event_fed %>% \r\n  mutate(t = seq(-5,5,1)) %>% \r\n  mutate(\"t_stat\" = `Cumulative Abnormal Return`/sigma_fed*sqrt(abs(t))) %>% \r\n  mutate(\"Result\" = ifelse(abs(t_stat) > 1.96, \"SIGNIFICANT\",\"INSIGNIFICANT\"))\r\n\r\ndf_event_fed %>% \r\n  ggplot(aes(x = factor(t), y = `Cumulative Abnormal Return`, group = 1)) +\r\n  geom_line() +\r\n  geom_point(aes(color = Result), size = 7) +\r\n  geom_vline(xintercept = factor(0)) +\r\n  geom_hline(yintercept = 0) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.title = element_blank(),\r\n        plot.title = element_text(size = 20),\r\n        plot.subtitle = element_text(size = 15)) +\r\n  scale_color_manual(values = c(\"gray40\",\"red\")) +\r\n  labs(title = \"FED\",\r\n       subtitle = \"t0: 22 Mayıs 2013\")\r\n\r\nsigma_gezi <- df_event_gezi %>% \r\n  summarise(sd = sd(`Abnormal Return`)) %>% \r\n  pull(sd)\r\n\r\ndf_event_gezi <- df_event_gezi %>% \r\n  mutate(t = seq(-5,5,1)) %>% \r\n  mutate(\"t_stat\" = `Cumulative Abnormal Return`/sigma_gezi*sqrt(abs(t))) %>% \r\n  mutate(\"Result\" = ifelse(abs(t_stat) > 1.96, \"SIGNIFICANT\",\"INSIGNIFICANT\"))\r\n\r\ndf_event_gezi %>% \r\n  ggplot(aes(x = factor(t), y = `Cumulative Abnormal Return`, group = 1)) +\r\n  geom_line() +\r\n  geom_point(aes(color = Result), size = 7) +\r\n  geom_vline(xintercept = factor(0)) +\r\n  geom_hline(yintercept = 0) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.title = element_blank(),\r\n        plot.title = element_text(size = 20),\r\n        plot.subtitle = element_text(size = 15)) +\r\n  scale_color_manual(values = c(\"gray40\",\"red\")) +\r\n  labs(title = \"GEZİ\",\r\n       subtitle = \"t0: 31 Mayıs 2013\")\r\n\r\new_sum_fed <- sum(df_event_fed$`Abnormal Return`)\r\new_tstat_fed <- ew_sum_fed / (sigma_fed * sqrt(11))\r\n\r\new_sum_gezi <- sum(df_event_gezi$`Abnormal Return`)\r\new_tstat_gezi <- ew_sum_gezi / (sigma_gezi * sqrt(11))\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-05-02-post1/post1_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2022-05-02T22:31:37+03:00",
    "input_file": {}
  }
]
